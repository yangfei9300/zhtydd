(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"2b28":function(t,e,n){"use strict";n.r(e);var i=n("a4ed"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"893e":function(t,e,n){"use strict";n.r(e);var i=n("cb3e"),o=n("2b28");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("d187");var s=n("828b"),h=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=h.exports},a4ed:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{title:"Hello",option:{series:null},option1:{series:null},option2:{series:null},option3:{series:null},menuType:["管理者","业务员","企业"],managementType:1,exhTypeList:[],exhTyppeIndex:-1,exhIndex:-1,exhList:[],zsglInfo:{},yjgkInfo:{allExh:null,month:null,week:null,year:null},turnoutNum:{params:null},bingData:null,qiyeExh:[],qiyeExhIndex:-1,qiyebooths:[],qiyeservices:[],banners:[],time1Week:"",time1Month:""}},onLoad:function(){var e=t.getStorageSync("userInfo");e||(this.$tools.showToast("请先登录"),setTimeout((function(e){t.clearStorageSync(),t.navigateTo({url:"/pages/login/login"})}),1e3));var n=t.getStorageSync("identityType");1==n?(this.managementType=3,this.getuserexhlist()):2==n&&(this.managementType=2,this.getExhList()),this.carousellistGet();var i=this.getCurrentWeekRange(),o=this.getCurrentMonthRange();this.time1Week=i,this.time1Month=o},onReady:function(){},methods:{getCurrentWeekRange:function(){var t=new Date,e=t.getDay(),n=0===e?-6:1-e,i=new Date(t);i.setDate(t.getDate()+n);var o=new Date(i);o.setDate(i.getDate()+6);var a=function(t){var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(e,".").concat(n,".").concat(i)};return"".concat(a(i)," - ").concat(a(o))},getCurrentMonthRange:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),i=new Date(e,n,1),o=new Date(e,n+1,0),a=function(t){var e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(e,".").concat(n,".").concat(i)};return"".concat(a(i)," - ").concat(a(o))},toSumBiaozhan:function(t){return t/=9,t=t.toFixed(2),t},carousellistGet:function(){var t=this;this.$axios.axios("get",this.$paths.carousellist,{pageSize:"1000",pageNum:"1"}).then((function(e){200==e.code?t.banners=e.rows:t.$tools.showToast(e.msg)})).catch((function(t){}))},exhChangeQiye:function(t){this.qiyeExhIndex=parseInt(t.detail.value),this.getbooths()},getbooths:function(){var e=this,n=t.getStorageSync("userInfo"),i={exhId:this.qiyeExh[this.qiyeExhIndex].id,pageSize:1e3,exhibitorId:n.exhibitorId};this.$axios.axios("get",this.$paths.customerbuybooth,i).then((function(t){200==t.code?e.qiyebooths=t.rows:e.$tools.showToast(t.msg)})).catch((function(t){})),this.$axios.axios("get",this.$paths.customerbuyservice,i).then((function(t){200==t.code?e.qiyeservices=t.rows:e.$tools.showToast(t.msg)})).catch((function(t){}))},getuserexhlist:function(){var e=this,n=t.getStorageSync("userInfo"),i={exhibitorId:n.exhibitorId};this.$axios.axios("get",this.$paths.userexhlist,i).then((function(t){200==t.code?(e.qiyeExh=t.rows,e.qiyeExh.length>0&&(e.qiyeExhIndex=0,e.getbooths())):e.$tools.showToast(t.msg)})).catch((function(t){}))},infosaleranking:function(){var t=this,e={exhId:this.exhList[this.exhIndex].id};this.$axios.axios("POST",this.$paths.infosaleranking,e).then((function(e){if(200==e.code){for(var n=e.thisMonth,i=e.thisWeek,o=[[],[]],a=0;a<i.length;a++)o[0].push(i[a].params.nickName),o[1].push(i[a].params.zongjine);var s=[[],[]];for(a=0;a<n.length;a++)s[0].push(n[a].params.nickName),s[1].push(n[a].params.zongjine);t.loadbin(o,s)}else t.$tools.showToast(e.msg)})).catch((function(t){}))},loadbin:function(t,e){this.option2={title:{text:"每个周的业绩",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"line"},confine:!0},grid:{left:20,right:20,bottom:15,top:40,containLabel:!0},xAxis:[{type:"category",axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666",interval:0,rotate:90},data:t[0]}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666"}}],series:[{name:"金额",type:"bar",label:{normal:{show:!0,position:"inside"}},barGap:"200px",data:t[1]}]},this.option3={title:{text:"每个人的月业绩",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"line"},confine:!0},grid:{left:20,right:20,bottom:15,top:40,containLabel:!0},xAxis:[{type:"category",axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666",interval:0,rotate:90},data:e[0]}],yAxis:[{type:"value",axisTick:{show:!1},axisLine:{lineStyle:{color:"#999"}},axisLabel:{color:"#666"}}],series:[{name:"金额",type:"bar",label:{normal:{show:!0,position:"inside"}},barGap:"200px",data:e[1]}]}},staffinfoboothGet:function(){var t=this,e={exhId:this.exhList[this.exhIndex].id};this.$axios.axios("POST",this.$paths.staffinfobooth,e).then((function(e){200==e.code?(t.bingData=e.data.params,t.bingChange()):t.$tools.showToast(e.msg)})).catch((function(t){}))},bingChange:function(){this.option={backgroundColor:"#ffffff",title:{text:"展位售卖情况",left:"center"},series:[{label:{normal:{fontSize:14}},type:"pie",center:["50%","50%"],radius:["0%","40%"],data:[{value:this.bingData.bindContractArea,name:"已售面积（"+this.bingData.bindContractArea+"m）"},{value:this.bingData.noBindArea,name:"未售面积（"+this.bingData.noBindArea+"m）"},{value:this.bingData.bindNoContractArea,name:"签售中面积（"+this.bingData.bindNoContractArea+"m）"}]}]}},getPeople:function(){var e=this,n=t.getStorageSync("userInfo"),i={exhId:this.exhList[this.exhIndex].id,referrerId:n.phonenumber};this.$axios.axios("POST",this.$paths.referrerCountarrive,i).then((function(t){200==t.code?e.turnoutNum=t.data:e.$tools.showToast(t.msg)})).catch((function(t){}))},infosaleexhGet:function(){var e=this,n={exhId:this.exhList[this.exhIndex].id,userId:""},i=t.getStorageSync("userInfo");if(!i)return this.$tools.showToast("请先登录"),!1;n.userId=i.userId,this.$axios.axios("POST",this.$paths.infosaleexh,n).then((function(t){200==t.code?(console.log("业绩概况",t),e.yjgkInfo={allExh:t.count.params,month:t.thisMonth.params,week:t.thisWeek.params,year:t.thisYear.params}):e.$tools.showToast(t.msg)})).catch((function(t){console.log("错误回调",t)}))},exhinfoexhibitorGet:function(){var e=this,n={exhId:this.exhList[this.exhIndex].id,userId:""},i=t.getStorageSync("userInfo");if(!i)return this.$tools.showToast("请先登录"),!1;n.userId=i.userId,this.$axios.axios("POST",this.$paths.exhinfoexhibitor,n).then((function(t){200==t.code?e.zsglInfo=t.data.params:e.$tools.showToast(t.msg)})).catch((function(t){console.log("错误回调",t)}))},zhanhuiGets:function(){this.exhinfoexhibitorGet(),this.infosaleexhGet(),this.getPeople(),this.staffinfoboothGet(),this.infosaleranking()},exhChange:function(e){this.exhIndex=e.detail.value,t.setStorageSync("exhIndex",this.exhIndex+1),t.setStorageSync("exhId",this.exhList[this.exhIndex].id),t.setStorageSync("exhInfo",this.exhList[this.exhIndex]);var n=t.getStorageSync("identityType");1==n?this.getbooths():this.zhanhuiGets()},exhTypeChange:function(e){this.exhTyppeIndex=parseInt(e.detail.value),this.exhIndex=-1,t.removeStorageSync("exhId"),this.getExhListYw(),t.setStorageSync("exhTyppeIndex",this.exhTyppeIndex)},getExhList:function(){var e=this;this.$axios.axios("get",this.$paths.exhtypelist,{pageSize:"1000",pageNum:"1"}).then((function(n){if(200==n.code){e.exhTypeList=n.rows;var i=t.getStorageSync("exhTyppeIndex");i?(e.exhTyppeIndex=parseInt(i),e.getExhListYw()):t.setStorageSync("exhTypeList",e.exhTypeList)}else e.$tools.showToast(n.msg)})).catch((function(t){console.log("错误回调",t)}))},getExhListYw:function(){var e=this,n={pageSize:"100",pageNum:"1",typeId:""},i=this.exhTyppeIndex;i>=0&&(n.typeId=this.exhTypeList[this.exhTyppeIndex].id),this.$axios.axios("get",this.$paths.exhtlist,n).then((function(n){if(200==n.code){e.exhList=n.rows,t.setStorageSync("exhList",e.exhList);var i=t.getStorageSync("exhIndex");i&&(i=parseInt(i)-1,i<=e.exhList.length-1&&(e.exhIndex=i,e.zhanhuiGets()))}else e.$tools.showToast(n.msg)})).catch((function(t){console.log("错误回调",t)}))},exhlistuser:function(){var e=this,n={pageSize:"100",pageNum:"1",exhibitorId:""},i=t.getStorageSync("userInfo");i&&(n.exhibitorId=i.exhibitorId),this.$axios.axios("get",this.$paths.exhlistuser,n).then((function(n){200==n.code?(e.exhList=n.rows,t.setStorageSync("exhList",e.exhList)):e.$tools.showToast(n.msg)})).catch((function(t){console.log("错误回调",t)}))},menuTypeClick:function(t){this.managementType=t+1,this.managementType},addContract:function(){var e=t.getStorageSync("exhId");if(!e)return this.$tools.showToast("请先选择具体展会"),!1;t.navigateTo({url:"/pages2/exhibitorList/exhibitorList"})},toyudengji:function(){t.navigateTo({url:"/pages1/yudengji/yudengji"})},tozhanweiList:function(){t.navigateTo({url:"/pages1/zhanweiList/zhanweiList"})},tozyjph:function(e){var n=t.getStorageSync("exhId");if(!n)return this.$tools.showToast("请先选择展会"),!1;3!=e?t.navigateTo({url:"/pages1/zhouyejipaihang/zhouyejipaihang?type="+e}):t.navigateTo({url:"/pages1/yudengji/yudengji"})},tozyjph1:function(e){t.navigateTo({url:"/pages3/daozhangPaihang/daozhangPaihang?type="+e})},tohetong1:function(){t.navigateTo({url:"/pages1/hetongList/hetongList"})}}};e.default=n}).call(this,n("df3c")["default"])},cb3e:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={echarts:function(){return Promise.all([n.e("common/vendor"),n.e("components/echarts-uniapp/echarts-uniapp")]).then(n.bind(null,"83db"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,2==t.managementType&&t.yjgkInfo.week?t.toSumBiaozhan(t.yjgkInfo.week.totalArea):null),i=2==t.managementType&&t.yjgkInfo.month?t.toSumBiaozhan(t.yjgkInfo.month.totalArea):null;t.$mp.data=Object.assign({},{$root:{m0:n,m1:i}})},a=[]},d187:function(t,e,n){"use strict";var i=n("e3e8"),o=n.n(i);o.a},e3e8:function(t,e,n){},f0f3:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("47a5");i(n("3240"));var o=i(n("893e"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["f0f3","common/runtime","common/vendor"]]]);