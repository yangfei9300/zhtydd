(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages2/qiyeSign/qiyeSign"],{"1dcb":function(t,n,e){"use strict";(function(t,e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={data:function(){return{options:{},signType:1,form:{userId:"",exhibitorId:"",recruitId:"",tempUrl:"",list:[{id:"",keyWord:"",imageCode:"",width:"",height:"",xOffset:"",yOffset:""}]},signImgs:["",""],signImgsInfos:[{width:200,height:110},{width:200,height:110}],zhangList:[],zhangsAlert:!1,zhangShowAlert:!1,hetongInfo:null,booths:[],services:[],payPlans:[],zhangSel:-1,zhangShowIndex:-1,identityType:""}},onLoad:function(n){var e=this.identityType;this.identityType=parseInt(e),t.removeStorageSync("img"),this.options=n,this.getGeHetongInfo()},onShow:function(){this.signImgs[this.signType-1]=t.getStorageSync("img"),this.$forceUpdate()},methods:{openFile:function(t){e.downloadFile({url:t,success:function(t){console.log(t);var n=t.tempFilePath;e.openDocument({filePath:n,showMenu:!0,success:function(t){console.log("打开文档成功")}})}})},selClick:function(t,n){this.zhangSel=n},zhangsAlertClick:function(){this.zhangsAlert=!this.zhangsAlert},zhangShowAlertClick:function(t){t>=0&&(this.zhangShowIndex=t),this.zhangShowAlert=!this.zhangShowAlert},getZhang:function(){var t=this,n={pageSize:"100",pageNum:"1",exhibitorId:this.hetongInfo.exhibitorId};this.$axios.axios("get",this.$paths.seallist,n).then((function(n){200==n.code?(console.log("邀请人数据",n),t.zhangList=n.rows):t.$tools.showToast(n.msg)})).catch((function(t){}))},getSign2:function(n,e){var i=this,o=t.createSelectorQuery().in(this);o.select(".sign2").boundingClientRect((function(t){i.signImgsInfos[e-1]={width:t.width,height:t.height}})).exec()},toSubmit:function(){var n=this;if(!this.isSubmit())return!1;var e=this.form;this.$axios.axios("POST",this.$paths.customercontractstamp,e).then((function(e){200==e.code?(n.$tools.showToast("签字完成"),setTimeout((function(n){t.navigateBack({delta:1})}),1e3)):n.$tools.showToast(e.msg)})).catch((function(t){}))},isSubmit:function(){if(""==this.signImgs[0])return this.$tools.showToast("请先签名"),!1;if(this.zhangSel<0)return this.$tools.showToast("请选择电子章"),!1;var t={id:"",keyWord:"乙方负责人（签章）",imageCode:this.signImgs[0],width:80,height:60,x:-10,y:-20};this.form.list=[t];var n={id:"",keyWord:"乙方（盖章）",imageCode:this.zhangList[this.zhangSel].imageCode,width:125,height:125,x:0,y:-50};return this.form.list.push(n),!0},toSign:function(n){this.signType=n,t.navigateTo({url:"/pages1/signView/signView"})},getGeHetongInfo:function(){var n=this;this.$axios.axios("get",this.$paths.customercontractinfo+this.options.id,{}).then((function(e){if(200==e.code){n.hetongInfo=e.data.data,n.hetongInfo.params.booths&&(n.booths=n.hetongInfo.params.booths),n.hetongInfo.params.service&&(n.services=n.hetongInfo.params.service),n.hetongInfo.params.payPlans&&(n.payPlans=n.hetongInfo.params.payPlans),console.log("合同详情",n.hetongInfo);var i=n.form;i.userId=t.getStorageSync("userInfo").id,i.exhibitorId=n.hetongInfo.exhibitorId,i.recruitId=n.options.id,i.tempUrl=n.hetongInfo.file,n.form=i,n.getZhang()}else n.$tools.showToast(e.msg)})).catch((function(t){}))}}};n.default=i}).call(this,e("df3c")["default"],e("3223")["default"])},3764:function(t,n,e){"use strict";e.r(n);var i=e("1dcb"),o=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(s);n["default"]=o.a},4771:function(t,n,e){"use strict";(function(t,n){var i=e("47a9");e("47a5");i(e("3240"));var o=i(e("cc09"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(o.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},6019:function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){}));var i=function(){var t=this.$createElement;this._self._c},o=[]},ae2e:function(t,n,e){},cc09:function(t,n,e){"use strict";e.r(n);var i=e("6019"),o=e("3764");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(s);e("e33e");var a=e("828b"),h=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=h.exports},e33e:function(t,n,e){"use strict";var i=e("ae2e"),o=e.n(i);o.a}},[["4771","common/runtime","common/vendor"]]]);